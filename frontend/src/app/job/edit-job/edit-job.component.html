<div class="container-fluid py-4 px-0">
  <div class="container-lg pb-2 pt-5 px-5 bigContentContainer">
    <form [formGroup]="editJobForm" (ngSubmit)="onSubmit()" id="editJobForm" class="jobForm">
      <div class="row mt-3 justify-content-center">
        <div class="col-12 col-lg-6 d-flex align-content-center">
          <div class="container-fluid">
            <div class="row">
              <div class="col-12 px-0 d-flex justify-content-lg-start justify-content-center align-items-start">
                <div>
                  <div style="height: 400px; width:400px;">
                    <ng-template [ngIf]="job.images.length > 0" [ngIfElse]="noImages">
                      <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                        <div id="carousel" class="carousel-inner">
                          <ng-template ngFor let-image [ngForOf]="job.images">
                            <div class="carousel-item" id="${image.id}">
                              <img src="#" alt="${job.category}" class="rounded jobImages"
                                style="object-fit: cover; height: 100%; width: 100%">
                              <!--<img src="<c:url value='/jobs/images/${image.id}'/>"
                                   alt="${job.category}" class="rounded jobImages"
                                   style="object-fit: cover; height: 100%; width: 100%">-->
                              <span class="imageDelete" style="cursor: pointer;" data-image-id="${image.id}">
                                <button class="deleteButton" type="button">
                                  <i class="fas fa-trash fa-lg trashIcon"></i>
                                </button>
                              </span>
                            </div>
                          </ng-template>

                          <div style="display: none;" id="defaultImageCarousel">
                            <img id="defaultImage" src="#" alt="${job.category}" class="rounded"
                              style="object-fit: cover; height: 100%; width: 100%;" />
                            <!--<img id="defaultImage"
                                 src="<c:url value='/resources/images/${job.category}.jpg'/>"
                                 alt="${job.category}" class="rounded"
                                 style="object-fit: cover; height: 100%; width: 100%;"/>-->
                          </div>
                        </div>

                        <ng-template [ngIf]="job.images.length > 1">
                          <a class="carousel-control-prev" href="#carouselExampleControls" role="button"
                            data-slide="prev" id="previous">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                          </a>
                          <a class="carousel-control-next" href="#carouselExampleControls" role="button"
                            data-slide="next" id="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                          </a>
                        </ng-template>

                      </div>
                    </ng-template>
                    <ng-template #noImages>
                      <img src="<c:url value='/resources/images/${job.category}.jpg'/>" alt="${job.category}"
                        class="rounded" style="object-fit: cover; height: 100%; width: 100%" />
                    </ng-template>
                  </div>
                </div>
              </div>
              <div class="col-10 mt-3 px-0">
                <div class="form-group d-flex justify-content-between align-items-center">
                  <label path="images" class="mt-2">
                    {{ 'jobForm.jobImageTitle' | translate }}
                  </label>
                  <div>
                    <span id="imagesQuantity" data-max="${maxImagesPerJob}" data-quantity="${fn:length(job.images)}">
                      {{imagesArray.length}}
                    </span>
                    <span>/ {{ maxImagesPerJob }}</span>
                  </div>

                  <button class="buttonCustom d-flex align-items-center justify-content-center" type="button"
                    id="addFileButton" (click)="fileInput.click()" [disabled]="imagesArray.length >= maxImagesPerJob"
                    [ngClass]="imagesArray.length < maxImagesPerJob ? 'buttonEnabled' : 'buttonDisabled'">
                    <i class="fas fa-upload mr-1"></i>
                    {{'jobForm.ImagesButton' | translate}}
                  </button>
                  <input type="file" id="inputFiles" name="images" accept=".png,.jpg,.jpeg" hidden
                    (change)="onFileChanged($event)" #fileInput />
                </div>

                <div class="container-fluid p-0" id="imagesHolder">
                  <div class="row">
                    <div class="col-12">
                      <button type="button" class="imgFile m-2"
                        *ngFor="let control of imagesArray.controls; let i = index" (click)="deleteImage(i)">
                        {{control.value.name}}
                        <i class="fas fa-times ml-1"></i>
                      </button>
                      <span *ngIf="!allowedImageType" class="errorMessage"><br>{{'ImageTypeConstraint.jobForm.images' |
                        translate}}</span>
                      <span *ngIf="!allowedImageSize" class="errorMessage"><br>{{'errors.MaxUploadSizeException' |
                        translate}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-6 d-flex justify-content-center align-items-start">
          <div class="container-fluid">
            <div class="row">
              <div class="col-12 pl-0 form-group">
                <label class="label" path="jobProvided">
                  {{ 'jobForm.jobNameTitle' | translate }}
                  <span class="required-field"> *</span></label>
                <input type="text" path="jobProvided" id="state" class="form-control" value="{{job.jobProvided}}"
                  formControlName="jobProvided">
              </div>
              <div class="col-12 pl-0 form-group ">
                <span class="label">
                  {{ 'jobForm.jobTypeTitle' | translate }}
                  <span class="required-field"> *</span>
                </span><br>
                <input class="form-control " type="text" value="{{'home.categories.' + job.category | translate }}"
                  disabled formControlName="jobCategory" />
              </div>

              <div class="col-12 pl-0 form-group">
                <label class="label">
                  {{ 'jobForm.jobPriceTitle' | translate }}
                  <span class="required-field"> *</span></label>

                <input type="number" value="{{job.price}}" id="price" class="form-control" formControlName="price" />
              </div>
              <div class="col-12 pl-0 form-group">
                <label class="label" path="description">
                  {{ 'jobForm.jobDescriptionTitle' | translate }}
                  <span class="required-field"> *</span>
                </label>
                <textarea data-description="${job.description}" style="width: 100%;height: 100px;
                             padding: 12px 20px; box-sizing: border-box;
                           border: 2px solid #ccc; border-radius: 4px;
                            background-color: #f8f8f8; resize: none;" id="textArea" class="form-control"
                  formControlName="description"></textarea>

              </div>
              <div class="col-12 pl-0">
                <div class="form-group">
                  <input type="hidden" id="paused" value="${job.paused}" />
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="${job.paused}" id="pauseCheck">
                    <label class="form-check-label" for="pauseCheck">
                      {{ 'job.editPaused' | translate }}
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 px-0">
          <hr class="text-left ml-0 my-3" style="width: 100%;">
        </div>

        <div class="col-10 col-md-6 px-0 d-flex justify-content-around align-items-center">

          <a [routerLink]="['/jobs',job.id]">
            <button class="closeBtn my-2 d-flex align-items-center justify-content-center" type="button">
              {{ 'job.cancel' | translate }}
            </button>
          </a>
          <button type="button" id="editFormButton" form="editJobForm"
            class="rateBtn my-2 d-flex align-items-center justify-content-center">
            <span id="loadingSpinner" class="spinner-border spinner-border-sm" hidden role="status"
              aria-hidden="true"></span>
            <span id="senBtnText">
              {{ 'job.submit' | translate }}
            </span>
          </button>

        </div>
      </div>
    </form>
  </div>
</div>
